<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Form Data Viewer</title>
    <link rel="icon" type="image/png" href="https://www.visad.co.uk/wp-content/uploads/2025/08/visad-png.png">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" />
    <link href="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/css/select2.min.css" rel="stylesheet" />
    <!-- Linking to the new CSS file -->
    <link rel="stylesheet" href="form_data_viewer.css">
</head>

<body>
    <div class="main-container">
        <!-- Fixed Client Info Header -->
        <div class="client-info-header">
            <div class="client-info-main">
                <img src="https://www.visad.co.uk/wp-content/uploads/2025/08/visad-png.png" alt="VisaD Logo"
                    class="client-header-logo">
                <div class="client-info-text">
                    <h2 id="client-name">Loading...</h2>
                    <p id="client-details">
                        <span>Applied for a</span>
                        <strong id="visa-country">-</strong>
                        <strong id="visa-type">-</strong>
                        <span>visa in</span>
                        <strong id="application-city">-</strong>
                        <span>with our</span>
                        <strong id="package-type">-</strong>
                        <span>package</span>
                    </p>
                </div>
            </div>

            <!-- NEW: Horizontal Navigation Bar -->
            <nav class="horizontal-nav">
                <button class="nav-item active" data-action="locker-data">
                    <div class="nav-icon">
                        <i class="fas fa-database"></i>
                    </div>
                    <span class="nav-label">Data</span>
                </button>

                <button class="nav-item" data-action="client-documents">
                    <div class="nav-icon">
                        <i class="fas fa-folder-open"></i>
                    </div>
                    <span class="nav-label">Documents</span>
                </button>

                <button class="nav-item" data-action="covering-letter">
                    <div class="nav-icon">
                        <i class="fas fa-file-alt"></i>
                    </div>
                    <span class="nav-label">Cover Letter</span>
                </button>

                <button class="nav-item" data-action="checklist">
                    <div class="nav-icon">
                        <i class="fas fa-tasks"></i>
                    </div>
                    <span class="nav-label">Checklist</span>
                </button>
                <button class="nav-item" data-action="generate-portugal-pdf">
                    <div class="nav-icon">
                        <i class="fas fa-file-pdf"></i>
                    </div>
                    <span class="nav-label">Application Form Generator</span>
                </button>
            </nav>

            <!-- Theme Toggle Button -->
            <button id="theme-toggle-btn" class="theme-toggle-btn" title="Toggle Dark Mode">
                <i class="fas fa-moon"></i>
            </button>

            <!-- Lock/Unlock Toggle Switch -->
            <div class="lock-toggle-wrapper" id="lock-toggle-wrapper" title="Toggle Form Lock">
                <span class="lock-label" id="lock-status-label">Unlocked</span>
                <label class="lock-switch">
                    <input type="checkbox" id="lock-toggle-checkbox">
                    <span class="slider round">
                        <i class="fas fa-lock-open" id="lock-slider-icon"></i>
                    </span>
                </label>
            </div>
        </div>

        <div class="form-container">

            <div class="header">
                <h1 id="header-title">Client Form Data</h1>

                <!-- Appointment Date Display -->
                <div id="appointment-date-display" style="display: none;">
                    <div class="appointment-date-badge">
                        <i class="fas fa-calendar-alt"></i>
                        <span>Appointment Date: <strong id="appointment-date-text">-</strong></span>
                    </div>
                </div>

                <!-- Co-Travellers Display -->
                <div id="co-travellers-section" style="display: none;">
                    <div class="co-travellers-container">
                        <div class="co-travellers-header" id="co-travellers-toggle" style="cursor: pointer;">
                            <div style="display: flex; align-items: center; gap: 10px;">
                                <i class="fas fa-users"></i>
                                <span id="co-travellers-title">CO-TRAVELLERS</span>
                            </div>
                            <i class="fas fa-chevron-down" id="co-travellers-chevron"></i>
                        </div>
                        <div id="co-travellers-list"></div>
                    </div>
                </div>

                <!-- Lock/Unlock Badge -->
                <div class="header-actions">
                    <div class="form-status-badge-header" id="form-status-badge-header">
                        <i class="fas fa-lock-open" id="lock-icon"></i>
                        <span id="lock-status-text">Form Unlocked</span>
                    </div>
                </div>

                <div id="progress-bar-container" style="display: none;">
                    <div id="progress-text-wrapper">
                        <span>Application Progress</span>
                        <span id="progress-text">0%</span>
                    </div>
                    <div id="progress-bar-wrapper">
                        <div id="progress-bar"></div>
                    </div>
                </div>
            </div>

            <div class="content-area">
                <!-- Login View is removed, we will load data directly -->
                <!-- Summary View (This will be the main view) -->
                <div id="summary-view" class="view active">
                    <div id="summary-final-message" class="success-message" style="display: none;">
                        <i class="fas fa-check-circle"></i> Form is locked.
                    </div>

                    <!-- Section 1: Locked Information -->
                    <div class="section">
                        <div class="section-header">
                            <h3 class="section-title"><i class="fas fa-lock"></i> Locked Information</h3>
                            <span class="locked-badge"><i class="fas fa-lock"></i> Locked</span>
                        </div>
                        <div class="info-grid" id="summary-locked-grid">
                            <!-- Content will be populated by JS -->
                        </div>

                    </div>


                    <!-- Section 2: Personal Details -->
                    <div class="section" id="section-personal">
                        <div class="section-header">
                            <h3 class="section-title"><i class="fas fa-user-circle"></i> Personal & Contact Details</h3>
                            <div class="section-edit-buttons">
                                <button class="btn-secondary cancel-btn" style="display: none;"><i
                                        class="fas fa-times"></i> Cancel</button>
                                <!-- <button class="btn-primary edit-btn"><i class="fas fa-edit"></i> Edit</button> -->
                            </div>
                        </div>
                        <div class="info-grid" id="summary-personal-grid">
                            <!-- Content will be populated by JS -->
                        </div>
                    </div>

                    <!-- Section 3: Grouped Questions (Categories) -->
                    <div id="summary-questions-grid">
                        <!-- All question sections will be dynamically injected here by JS -->
                    </div>

                </div>

                <!-- Checklist View -->
                <div id="checklist-view" class="view" style="display: none;">
                    <div class="section">
                        <div class="section-header">
                            <h3 class="section-title"><i class="fas fa-tasks"></i> Schengen Visa Application Checklist
                            </h3>
                            <div class="checklist-summary">
                                <div class="summary-stat">
                                    <span class="stat-number" id="completed-count">0</span>
                                    <span class="stat-label">Completed</span>
                                </div>
                                <div class="summary-stat pending-stat">
                                    <span class="stat-number" id="pending-count">0</span>
                                    <span class="stat-label">Pending</span>
                                </div>
                            </div>
                        </div>

                        <div class="checklist-container">
                            <div class="checklist-item" data-check="passport">
                                <div class="checklist-left">
                                    <div class="checklist-checkbox">
                                        <i class="fas fa-circle unchecked"></i>
                                        <i class="fas fa-check-circle checked" style="display: none;"></i>
                                    </div>
                                    <div class="checklist-content">
                                        <h4><i class="fas fa-passport"></i> Valid passport</h4>
                                        <p class="checklist-description">Must be valid for at least 3 months after
                                            intended departure from Schengen area</p>
                                        <p class="checklist-status"></p>
                                    </div>
                                </div>
                                <div class="checklist-files"></div>
                            </div>

                            <div class="checklist-item" data-check="uk-evisa">
                                <div class="checklist-left">
                                    <div class="checklist-checkbox">
                                        <i class="fas fa-circle unchecked"></i>
                                        <i class="fas fa-check-circle checked" style="display: none;"></i>
                                    </div>
                                    <div class="checklist-content">
                                        <h4><i class="fas fa-id-card"></i> UK E-Visa Page Print</h4>
                                        <p class="checklist-description">UK E-Visa screenshot or PDF (if applicable)</p>
                                        <p class="checklist-status"></p>
                                    </div>
                                </div>
                                <div class="checklist-files"></div>
                            </div>

                            <div class="checklist-item" data-check="uk-share-code">
                                <div class="checklist-left">
                                    <div class="checklist-checkbox">
                                        <i class="fas fa-circle unchecked"></i>
                                        <i class="fas fa-check-circle checked" style="display: none;"></i>
                                    </div>
                                    <div class="checklist-content">
                                        <h4><i class="fas fa-qrcode"></i> UK Immigration Status Share Code Print</h4>
                                        <p class="checklist-description">UK immigration share code document (if
                                            applicable)</p>
                                        <p class="checklist-status"></p>
                                    </div>
                                </div>
                                <div class="checklist-files"></div>
                            </div>

                            <div class="checklist-item" data-check="photographs">
                                <div class="checklist-left">
                                    <div class="checklist-checkbox">
                                        <i class="fas fa-circle unchecked"></i>
                                        <i class="fas fa-check-circle checked" style="display: none;"></i>
                                    </div>
                                    <div class="checklist-content">
                                        <h4><i class="fas fa-camera"></i> Passport photographs</h4>
                                        <p class="checklist-description">2 recent passport-size photos (35mm x 45mm)</p>
                                        <p class="checklist-status"></p>
                                    </div>
                                </div>
                                <div class="checklist-files"></div>
                            </div>

                            <div class="checklist-item" data-check="bank-statements">
                                <div class="checklist-left">
                                    <div class="checklist-checkbox">
                                        <i class="fas fa-circle unchecked"></i>
                                        <i class="fas fa-check-circle checked" style="display: none;"></i>
                                    </div>
                                    <div class="checklist-content">
                                        <h4><i class="fas fa-building-columns"></i> Bank statements</h4>
                                        <p class="checklist-description">Last 3 months of bank statements</p>
                                        <p class="checklist-status"></p>
                                    </div>
                                </div>
                                <div class="checklist-files"></div>
                            </div>

                            <div class="checklist-item" data-check="credit-card-statement">
                                <div class="checklist-left">
                                    <div class="checklist-checkbox">
                                        <i class="fas fa-circle unchecked"></i>
                                        <i class="fas fa-check-circle checked" style="display: none;"></i>
                                    </div>
                                    <div class="checklist-content">
                                        <h4><i class="fas fa-credit-card"></i> Credit card statement</h4>
                                        <p class="checklist-description">Recent credit card statement (if applicable)
                                        </p>
                                        <p class="checklist-status"></p>
                                    </div>
                                </div>
                                <div class="checklist-files"></div>
                            </div>

                            <div class="checklist-item" data-check="payslips">
                                <div class="checklist-left">
                                    <div class="checklist-checkbox">
                                        <i class="fas fa-circle unchecked"></i>
                                        <i class="fas fa-check-circle checked" style="display: none;"></i>
                                    </div>
                                    <div class="checklist-content">
                                        <h4><i class="fas fa-money-check-alt"></i> Pay slips (UK COMPANY)</h4>
                                        <p class="checklist-description">Last 3 months of salary slips</p>
                                        <p class="checklist-status"></p>
                                    </div>
                                </div>
                                <div class="checklist-files"></div>
                            </div>

                            <div class="checklist-item" data-check="employment">
                                <div class="checklist-left">
                                    <div class="checklist-checkbox">
                                        <i class="fas fa-circle unchecked"></i>
                                        <i class="fas fa-check-circle checked" style="display: none;"></i>
                                    </div>
                                    <div class="checklist-content">
                                        <h4><i class="fas fa-briefcase"></i> <span id="employment-title">Employment
                                                Status Letter</span></h4>
                                        <p class="checklist-description" id="employment-description">Required document
                                            based on occupation</p>
                                        <p class="checklist-status"></p>
                                    </div>
                                </div>
                                <div class="checklist-files"></div>
                            </div>

                            <div class="checklist-item" data-check="insurance">
                                <div class="checklist-left">
                                    <div class="checklist-checkbox">
                                        <i class="fas fa-circle unchecked"></i>
                                        <i class="fas fa-check-circle checked" style="display: none;"></i>
                                    </div>
                                    <div class="checklist-content">
                                        <h4><i class="fas fa-shield-alt"></i> Travel insurance certificate</h4>
                                        <p class="checklist-description">Minimum â‚¬30,000 coverage for entire Schengen
                                            area</p>
                                        <p class="checklist-status"></p>
                                    </div>
                                </div>
                                <div class="checklist-files"></div>
                            </div>

                            <div class="checklist-item" data-check="application-form">
                                <div class="checklist-left">
                                    <div class="checklist-checkbox">
                                        <i class="fas fa-circle unchecked"></i>
                                        <i class="fas fa-check-circle checked" style="display: none;"></i>
                                    </div>
                                    <div class="checklist-content">
                                        <h4><i class="fas fa-file-alt"></i> Application Form Fully Filled</h4>
                                        <p class="checklist-description">Complete Schengen visa application form signed
                                            and dated</p>
                                        <p class="checklist-status"></p>
                                    </div>
                                </div>
                                <div class="checklist-files">
                                    <button id="generate-application-form-btn" class="btn-primary btn-sm">
                                        <i class="fas fa-file-export"></i> Generate Application Form
                                    </button>
                                </div>
                            </div>

                            <div class="checklist-item" data-check="hotel">
                                <div class="checklist-left">
                                    <div class="checklist-checkbox">
                                        <i class="fas fa-circle unchecked"></i>
                                        <i class="fas fa-check-circle checked" style="display: none;"></i>
                                    </div>
                                    <div class="checklist-content">
                                        <h4><i class="fas fa-hotel"></i> Hotel booking confirmation</h4>
                                        <p class="checklist-description">Confirmed accommodation for entire trip
                                            duration</p>
                                        <p class="checklist-status"></p>
                                    </div>
                                </div>
                                <div class="checklist-files"></div>
                            </div>

                            <div class="checklist-item" data-check="appointment">
                                <div class="checklist-left">
                                    <div class="checklist-checkbox">
                                        <i class="fas fa-circle unchecked"></i>
                                        <i class="fas fa-check-circle checked" style="display: none;"></i>
                                    </div>
                                    <div class="checklist-content">
                                        <h4><i class="fas fa-calendar-check"></i> Appointment Confirmation</h4>
                                        <p class="checklist-description">VFS/Consulate appointment confirmation document
                                        </p>
                                        <p class="checklist-status"></p>
                                    </div>
                                </div>
                                <div class="checklist-files"></div>
                            </div>

                            <div class="checklist-item" data-check="flight">
                                <div class="checklist-left">
                                    <div class="checklist-checkbox">
                                        <i class="fas fa-circle unchecked"></i>
                                        <i class="fas fa-check-circle checked" style="display: none;"></i>
                                    </div>
                                    <div class="checklist-content">
                                        <h4><i class="fas fa-plane"></i> Flight/Travel Ticket (return ticket)</h4>
                                        <p class="checklist-description">Round-trip flight booking with fully paid
                                            invoice</p>
                                        <p class="checklist-status"></p>
                                    </div>
                                </div>
                                <div class="checklist-files"></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Delete Confirmation Modal (re-used from user_form) -->
    <div id="delete-modal-backdrop" style="display: none;">
        <div id="delete-modal-content">
            <h4><i class="fas fa-trash"></i> Confirm Deletion</h4>
            <p>Are you sure you want to delete this file? This action cannot be undone.</p>
            <p id="delete-modal-filename" style="font-weight: 600; color: var(--error-color);"></p>
            <div class="modal-buttons">
                <button id="delete-modal-cancel" class="btn-secondary">Cancel</button>
                <button id="delete-modal-confirm" class="btn-primary danger">Delete File</button>
            </div>
        </div>
    </div>

    <!-- File Preview Tooltip -->
    <div id="file-preview-tooltip" class="file-preview-tooltip">
        <div class="preview-header">
            <i class="fas fa-file"></i>
            <span id="preview-filename">Preview</span>
        </div>
        <div id="preview-content">
            <div class="file-preview-loading">
                <i class="fas fa-spinner"></i>
            </div>
        </div>
    </div>

    <script src="https://code.jquery.com/jquery-3.7.1.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/js/select2.min.js"></script>
    <!-- Linking to the new JS file -->
    <script src="form_data_viewer.js"></script>
</body>

</html>